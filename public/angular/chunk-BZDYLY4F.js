import{a as y}from"./chunk-XA5HWJ5T.js";import{b as M,c as I}from"./chunk-QH2XNB2Z.js";import{k as S}from"./chunk-Q7TLRHPZ.js";import{A as c,Db as A,La as x,Na as r,Pa as _,Sa as a,Ta as p,Ua as v,Va as h,Wa as C,X as m,Xa as l,ab as P,da as d,ea as f,eb as T,gb as b,hb as g,ya as u,za as s}from"./chunk-CQTJWUY3.js";function $(t,i){if(t&1){let e=h();a(0,"app-textarea",3),C("sendText",function(o){d(e);let O=l();return f(O.add(o))}),p()}if(t&2){let e=l();r("setText",e.clearTextArea)}}function D(t,i){t&1&&(a(0,"p",1),P(1,"Login to post"),p())}var w=class t{constructor(i,e){this._postservice=i;this._authservice=e}allPosts$;clearTextArea=0;ngOnInit(){this.allPosts$=this._postservice.getAllPosts()}add(i){let e=this._authservice.userdata()?.id??0;e!=0&&this._postservice.addNewPost({content:i.content,id:e,parentpostid:null,file:i.file}).pipe(c(1e3)).subscribe({next:n=>{this.allPosts$=this._postservice.getAllPosts(),this.clearTextArea++},error:n=>{alert(n.error)}})}static \u0275fac=function(e){return new(e||t)(s(I),s(S))};static \u0275cmp=m({type:t,selectors:[["app-main"]],standalone:!0,features:[T],decls:4,vars:4,consts:[["placeholderText","What is happening?",3,"setText"],[1,"text-area-p"],[3,"list"],["placeholderText","What is happening?",3,"sendText","setText"]],template:function(e,n){if(e&1&&(x(0,$,1,1,"app-textarea",0)(1,D,2,0,"p",1),v(2,"app-postlist",2),b(3,"async")),e&2){let o;_(n._authservice.userdata()?0:1),u(2),r("list",(o=g(3,2,n.allPosts$))!==null&&o!==void 0?o:void 0)}},dependencies:[A,M,y]})};export{w as MainComponent};
