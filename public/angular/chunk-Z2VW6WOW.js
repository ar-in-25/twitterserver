import{a as E}from"./chunk-QQH3MLJ5.js";import{a as A,b as R,c as O}from"./chunk-3GP2JC2I.js";import{e as S,g as w,k as I}from"./chunk-DEH2YKPN.js";import{A as f,La as m,Na as a,Pa as l,Sa as p,Ta as d,Ua as u,Va as h,Wa as P,X as v,Xa as c,Ya as y,Za as T,_a as g,ab as x,da as _,ea as C,eb as b,ya as r,za as s}from"./chunk-EZ55MZ76.js";var M=["emptydiv"];function D(i,t){if(i&1&&u(0,"app-postlist",2),i&2){let e=c(2);a("list",e.post.ParentPosts)("showSeperator",!0)}}function Q(i,t){if(i&1){let e=h();p(0,"app-textarea",7),P("sendText",function(n){_(e);let j=c(2);return C(j.add(n))}),d()}if(i&2){let e=c(2);a("setText",e.clearTextArea)}}function N(i,t){i&1&&(p(0,"p",5),x(1,"Login to post"),d())}function U(i,t){if(i&1&&(p(0,"div",1),m(1,D,1,2,"app-postlist",2),u(2,"app-post",3),p(3,"div",null,0),x(5,"\xA0"),d(),m(6,Q,1,1,"app-textarea",4)(7,N,2,0,"p",5),u(8,"app-postlist",6),d()),i&2){let e=c();r(),l(e.post.ParentPosts?1:-1),r(),a("post",e.post),r(4),l(e._authservice.userdata()?6:7),r(2),a("list",e.post.ChildPosts)}}var V=class i{constructor(t,e,o,n){this.route=t;this._postservice=e;this._authservice=o;this.router=n}post;clearTextArea=0;emptydiv;data;ngOnInit(){this.route.params.pipe().subscribe({next:t=>{this.data={username:t.username,id:t.id},this.getPost()}})}getPost(){this._postservice.getUserPostById(this.data.username,this.data.id).subscribe({next:t=>{this.post=t,setTimeout(()=>this.emptydiv.nativeElement.scrollIntoView({behavior:"smooth"}),600)},error:t=>{console.log(t)}})}add(t){let e=this._authservice.userdata()?.id??0;e!=0&&this._postservice.addNewPost({content:t.content,id:e,parentpostid:this.post.id,file:t.file}).pipe(f(1e3)).subscribe({next:o=>{this.getPost(),this.clearTextArea++},error:o=>{alert(o.error)}})}static \u0275fac=function(e){return new(e||i)(s(S),s(O),s(I),s(w))};static \u0275cmp=v({type:i,selectors:[["app-postexpanded"]],viewQuery:function(e,o){if(e&1&&y(M,5),e&2){let n;T(n=g())&&(o.emptydiv=n.first)}},standalone:!0,features:[b],decls:1,vars:1,consts:[["emptydiv",""],[1,"container"],[3,"list","showSeperator"],[3,"post"],["placeholderText","Post your reply",3,"setText"],[1,"text-area-p"],[3,"list"],["placeholderText","Post your reply",3,"sendText","setText"]],template:function(e,o){e&1&&m(0,U,9,4,"div",1),e&2&&l(o.post?0:-1)},dependencies:[R,A,E],styles:["textarea[_ngcontent-%COMP%]{margin:8px 0;width:100%;font-size:16px;padding:8px;border-radius:2px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;resize:none}.container[_ngcontent-%COMP%]{padding-bottom:48px}"]})};export{V as PostexpandedComponent};
