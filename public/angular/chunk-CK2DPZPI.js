import{a as A}from"./chunk-A2E7EA2J.js";import{b as y,c as I}from"./chunk-5XYHWVA4.js";import{k as M}from"./chunk-4AVR65JZ.js";import{A as p,Ka as u,Ma as f,Oa as _,Ra as r,Sa as a,Ta as v,Ua as x,Va as C,Wa as P,X as m,Ya as h,ab as T,cb as b,da as l,db as g,ea as c,xa as d,ya as s,yb as S}from"./chunk-QATPKBQI.js";function $(t,i){if(t&1){let e=x();r(0,"app-textarea",3),C("sendText",function(o){l(e);let O=P();return c(O.add(o))}),a()}}function D(t,i){t&1&&(r(0,"p",1),h(1,"Login to post"),a())}var w=class t{constructor(i,e){this._postservice=i;this._authservice=e}allPosts$;textareaContent="";ngOnInit(){this.allPosts$=this._postservice.getAllPosts()}add(i){let e=this._authservice.userdata()?.id??0;this._postservice.addNewPost({content:i,id:e,parentpostid:null}).pipe(p(1e3)).subscribe({next:n=>{this.allPosts$=this._postservice.getAllPosts(),this.textareaContent=""},error:n=>{alert(n.error)}})}static \u0275fac=function(e){return new(e||t)(s(I),s(M))};static \u0275cmp=m({type:t,selectors:[["app-main"]],standalone:!0,features:[T],decls:4,vars:4,consts:[[3,"setText"],[1,"text-area-p"],[3,"list"],[3,"sendText","setText"]],template:function(e,n){if(e&1&&(u(0,$,1,0,"app-textarea",0)(1,D,2,0,"p",1),v(2,"app-postlist",2),b(3,"async")),e&2){let o;_(n._authservice.userdata()?0:1),d(2),f("list",(o=g(3,2,n.allPosts$))!==null&&o!==void 0?o:void 0)}},dependencies:[S,y,A]})};export{w as MainComponent};
