import{a as j}from"./chunk-75L3BLPX.js";import{a as O,b as R,c as Q}from"./chunk-INIIUKDS.js";import{e as V,k as M}from"./chunk-5A6FZFTQ.js";import{A as v,K as C,La as m,Na as a,Pa as l,Qa as y,Ra as T,Sa as o,Ta as r,Ua as f,Va as w,Wa as b,X as P,Xa as p,Ya as I,Za as S,_a as A,ab as x,da as h,ea as g,eb as E,n as _,y as u,ya as s,za as c}from"./chunk-3NGNS3BA.js";var N=["emptydiv"],z=(i,t)=>t.id;function U(i,t){if(i&1&&(f(0,"app-post",2),o(1,"div",6)(2,"div"),x(3,"|"),r()()),i&2){let e=t.$implicit;a("post",e)}}function $(i,t){if(i&1&&y(0,U,4,1,null,null,z),i&2){let e=p(2);T(e.post.ParentPosts)}}function k(i,t){if(i&1){let e=w();o(0,"app-textarea",7),b("sendText",function(d){h(e);let F=p(2);return g(F.add(d))}),r()}if(i&2){let e=p(2);a("setText",e.textareaContent)}}function q(i,t){i&1&&(o(0,"p",4),x(1,"Login to post"),r())}function B(i,t){if(i&1&&(o(0,"div",1),m(1,$,2,0),f(2,"app-post",2),o(3,"div",null,0),x(5,"\xA0"),r(),m(6,k,1,1,"app-textarea",3)(7,q,2,0,"p",4),f(8,"app-postlist",5),r()),i&2){let e=p();s(),l(e.post.ParentPosts?1:-1),s(),a("post",e.post),s(4),l(e._authservice.userdata()?6:7),s(2),a("list",e.post.ChildPosts)}}var D=class i{constructor(t,e,n){this.route=t;this._postservice=e;this._authservice=n}post;textareaContent="";emptydiv;ngOnInit(){this.getPost()}ngAfterViewInit(){}getPost(){this.route.paramMap.pipe(C(t=>this._postservice.getUserPostById(t.get("username"),t.get("id")).pipe(u(e=>_(e))))).subscribe({next:t=>{this.post=t,setTimeout(()=>this.emptydiv.nativeElement.scrollIntoView({behavior:"smooth"}),600)},error:t=>{console.log(t)}})}add(t){let e=this._authservice.userdata()?.id??0;e!=0&&this._postservice.addNewPost({content:t.content,id:e,parentpostid:this.post.id,file:t.file}).pipe(v(1e3)).subscribe({next:n=>{this.getPost()},error:n=>{alert(n.error)}})}static \u0275fac=function(e){return new(e||i)(c(V),c(Q),c(M))};static \u0275cmp=P({type:i,selectors:[["app-postexpanded"]],viewQuery:function(e,n){if(e&1&&I(N,5),e&2){let d;S(d=A())&&(n.emptydiv=d.first)}},standalone:!0,features:[E],decls:1,vars:1,consts:[["emptydiv",""],[1,"container"],[3,"post"],[3,"setText"],[1,"text-area-p"],[3,"list"],[1,"seperator"],[3,"sendText","setText"]],template:function(e,n){e&1&&m(0,B,9,4,"div",1),e&2&&l(n.post?0:-1)},dependencies:[R,O,j],styles:["textarea[_ngcontent-%COMP%]{margin:8px 0;width:100%;font-size:16px;padding:8px;border-radius:2px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;resize:none}.seperator[_ngcontent-%COMP%]{display:flex;justify-content:center}.container[_ngcontent-%COMP%]{padding-bottom:48px}"]})};export{D as PostexpandedComponent};
