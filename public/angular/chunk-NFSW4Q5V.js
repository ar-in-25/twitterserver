import{a as A}from"./chunk-QQH3MLJ5.js";import{b as g,c as S}from"./chunk-3GP2JC2I.js";import{k as T}from"./chunk-DEH2YKPN.js";import{A as l,La as u,Na as s,Pa as x,Sa as r,Ta as a,Ua as _,Va as h,Wa as v,X as c,Xa as p,ab as C,da as m,ea as d,eb as P,ya as f,za as o}from"./chunk-EZ55MZ76.js";function y(i,t){if(i&1){let e=h();r(0,"app-textarea",3),v("sendText",function(M){m(e);let w=p();return d(w.add(M))}),a()}if(i&2){let e=p();s("setText",e.clearTextArea)}}function I(i,t){i&1&&(r(0,"p",1),C(1,"Login to post"),a())}var b=class i{constructor(t,e){this._postservice=t;this._authservice=e}allPosts;clearTextArea=0;ngOnInit(){this.getAllPosts()}getAllPosts(){this._postservice.getAllPosts().subscribe({next:t=>{this.allPosts=t}})}add(t){let e=this._authservice.userdata()?.id??0;e!=0&&this._postservice.addNewPost({content:t.content,id:e,parentpostid:null,file:t.file}).pipe(l(1e3)).subscribe({next:n=>{this.getAllPosts(),this.clearTextArea++},error:n=>{alert(n.error)}})}static \u0275fac=function(e){return new(e||i)(o(S),o(T))};static \u0275cmp=c({type:i,selectors:[["app-main"]],standalone:!0,features:[P],decls:3,vars:3,consts:[["placeholderText","What is happening?",3,"setText"],[1,"text-area-p"],[3,"list","showSeperator"],["placeholderText","What is happening?",3,"sendText","setText"]],template:function(e,n){e&1&&(u(0,y,1,1,"app-textarea",0)(1,I,2,0,"p",1),_(2,"app-postlist",2)),e&2&&(x(n._authservice.userdata()?0:1),f(2),s("list",n.allPosts)("showSeperator",!1))},dependencies:[g,A]})};export{b as MainComponent};
