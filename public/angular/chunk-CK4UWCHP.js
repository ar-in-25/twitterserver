import{a as A}from"./chunk-A2E7EA2J.js";import{a as I,b as w,c as M}from"./chunk-J7XOMCCY.js";import{e as y,k as S}from"./chunk-WHQF746G.js";import{A as f,K as u,Ka as a,Ma as n,Oa as d,Ra as m,Sa as l,Ta as c,Ua as h,Va as g,Wa as s,X as C,Ya as T,ab as b,da as P,ea as v,n as x,xa as r,y as _,ya as p}from"./chunk-QATPKBQI.js";function j(o,e){if(o&1&&c(0,"app-post",0),o&2){let t=s(2);n("post",t.post.ParentPost)}}function E(o,e){if(o&1){let t=h();m(0,"app-textarea",4),g("sendText",function(D){P(t);let V=s(2);return v(V.add(D))}),l()}if(o&2){let t=s(2);n("setText",t.textareaContent)}}function N(o,e){o&1&&(m(0,"p",2),T(1,"Login to post"),l())}function R(o,e){if(o&1&&(a(0,j,1,1,"app-post",0),c(1,"app-post",0),a(2,E,1,1,"app-textarea",1)(3,N,2,0,"p",2),c(4,"app-postlist",3)),o&2){let t=s();d(t.post.ParentPost?0:-1),r(),n("post",t.post),r(),d(t._authservice.userdata()?2:3),r(2),n("list",t.post.ChildPosts)}}var O=class o{constructor(e,t,i){this.route=e;this._postservice=t;this._authservice=i}post;textareaContent="";ngOnInit(){this.getPost()}getPost(){this.route.paramMap.pipe(u(e=>this._postservice.getUserPostById(e.get("username"),e.get("id")).pipe(_(t=>x(t))))).subscribe({next:e=>{this.post=e},error:e=>{console.log(e)}})}add(e){let t=this._authservice.userdata()?.id??0;this._postservice.addNewPost({content:e,id:t,parentpostid:this.post.id}).pipe(f(1e3)).subscribe({next:i=>{this.getPost()},error:i=>{alert(i.error)}})}static \u0275fac=function(t){return new(t||o)(p(y),p(M),p(S))};static \u0275cmp=C({type:o,selectors:[["app-postexpanded"]],standalone:!0,features:[b],decls:1,vars:1,consts:[[3,"post"],[3,"setText"],[1,"text-area-p"],[3,"list"],[3,"sendText","setText"]],template:function(t,i){t&1&&a(0,R,5,4),t&2&&d(i.post?0:-1)},dependencies:[w,I,A],styles:["textarea[_ngcontent-%COMP%]{margin:8px 0;width:100%;font-size:16px;padding:8px;border-radius:2px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;resize:none}"]})};export{O as PostexpandedComponent};
