import{a as j}from"./chunk-XA5HWJ5T.js";import{a as O,b as R,c as Q}from"./chunk-QH2XNB2Z.js";import{e as V,k as M}from"./chunk-Q7TLRHPZ.js";import{A as v,K as C,La as l,Na as a,Pa as m,Qa as g,Ra as T,Sa as n,Ta as r,Ua as x,Va as w,Wa as b,X as P,Xa as p,Ya as A,Za as I,_a as S,ab as f,da as h,ea as y,eb as E,n as _,y as u,ya as s,za as c}from"./chunk-CQTJWUY3.js";var N=["emptydiv"],z=(i,t)=>t.id;function U(i,t){if(i&1&&(x(0,"app-post",2),n(1,"div",6)(2,"div"),f(3,"|"),r()()),i&2){let e=t.$implicit;a("post",e)}}function $(i,t){if(i&1&&g(0,U,4,1,null,null,z),i&2){let e=p(2);T(e.post.ParentPosts)}}function k(i,t){if(i&1){let e=w();n(0,"app-textarea",7),b("sendText",function(d){h(e);let F=p(2);return y(F.add(d))}),r()}if(i&2){let e=p(2);a("setText",e.clearTextArea)}}function q(i,t){i&1&&(n(0,"p",4),f(1,"Login to post"),r())}function B(i,t){if(i&1&&(n(0,"div",1),l(1,$,2,0),x(2,"app-post",2),n(3,"div",null,0),f(5,"\xA0"),r(),l(6,k,1,1,"app-textarea",3)(7,q,2,0,"p",4),x(8,"app-postlist",5),r()),i&2){let e=p();s(),m(e.post.ParentPosts?1:-1),s(),a("post",e.post),s(4),m(e._authservice.userdata()?6:7),s(2),a("list",e.post.ChildPosts)}}var D=class i{constructor(t,e,o){this.route=t;this._postservice=e;this._authservice=o}post;clearTextArea=0;emptydiv;ngOnInit(){this.getPost()}ngAfterViewInit(){}getPost(){this.route.paramMap.pipe(C(t=>this._postservice.getUserPostById(t.get("username"),t.get("id")).pipe(u(e=>_(e))))).subscribe({next:t=>{this.post=t,setTimeout(()=>this.emptydiv.nativeElement.scrollIntoView({behavior:"smooth"}),600)},error:t=>{console.log(t)}})}add(t){let e=this._authservice.userdata()?.id??0;e!=0&&this._postservice.addNewPost({content:t.content,id:e,parentpostid:this.post.id,file:t.file}).pipe(v(1e3)).subscribe({next:o=>{this.getPost(),this.clearTextArea++},error:o=>{alert(o.error)}})}static \u0275fac=function(e){return new(e||i)(c(V),c(Q),c(M))};static \u0275cmp=P({type:i,selectors:[["app-postexpanded"]],viewQuery:function(e,o){if(e&1&&A(N,5),e&2){let d;I(d=S())&&(o.emptydiv=d.first)}},standalone:!0,features:[E],decls:1,vars:1,consts:[["emptydiv",""],[1,"container"],[3,"post"],["placeholderText","Post your reply",3,"setText"],[1,"text-area-p"],[3,"list"],[1,"seperator"],["placeholderText","Post your reply",3,"sendText","setText"]],template:function(e,o){e&1&&l(0,B,9,4,"div",1),e&2&&m(o.post?0:-1)},dependencies:[R,O,j],styles:["textarea[_ngcontent-%COMP%]{margin:8px 0;width:100%;font-size:16px;padding:8px;border-radius:2px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;resize:none}.seperator[_ngcontent-%COMP%]{display:flex;justify-content:center}.container[_ngcontent-%COMP%]{padding-bottom:48px}"]})};export{D as PostexpandedComponent};
