import{a as S}from"./chunk-BVGIIEUE.js";import{b as A,c as b}from"./chunk-QEPDTPTK.js";import{k as T}from"./chunk-JOLVZ6UO.js";import{A as m,La as x,Na as p,Pa as _,Sa as o,Ta as r,Ua as h,Va as v,Wa as C,X as d,Xa as l,ab as c,da as f,ea as u,eb as P,ya as a,za as s}from"./chunk-7YK7SVYE.js";function y(i,t){if(i&1){let e=v();o(0,"app-textarea",5),C("sendText",function(M){f(e);let w=l();return u(w.add(M))}),r()}if(i&2){let e=l();p("clearTextArea",e.clearTextArea)}}function I(i,t){i&1&&(o(0,"p",2),c(1,"Login to post"),r())}var g=class i{constructor(t,e){this._postservice=t;this._authservice=e}allPosts;clearTextArea=0;ngOnInit(){this.getAllPosts()}getAllPosts(){this._postservice.getAllPosts().subscribe({next:t=>{this.allPosts=t}})}add(t){let e=this._authservice.userdata()?.id??0;e!=0&&this._postservice.addNewPost({content:t.content,id:e,parentpostid:null,file:t.file}).pipe(m(1e3)).subscribe({next:n=>{this.getAllPosts(),this.clearTextArea++},error:n=>{alert(n.error)}})}static \u0275fac=function(e){return new(e||i)(s(b),s(T))};static \u0275cmp=d({type:i,selectors:[["app-main"]],standalone:!0,features:[P],decls:6,vars:3,consts:[[1,"container"],["placeholderText","What is happening?",3,"clearTextArea"],[1,"text-area-p"],[3,"list","showSeperator"],[1,"center-block"],["placeholderText","What is happening?",3,"sendText","clearTextArea"]],template:function(e,n){e&1&&(o(0,"div",0),x(1,y,1,1,"app-textarea",1)(2,I,2,0,"p",2),h(3,"app-postlist",3),o(4,"button",4),c(5,"Load Older"),r()()),e&2&&(a(),_(n._authservice.userdata()?1:2),a(2),p("list",n.allPosts)("showSeperator",!1))},dependencies:[A,S]})};export{g as MainComponent};
